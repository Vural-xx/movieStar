<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html 	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a = "http://xmlns.jcp.org/jsf/passthrough">
<ui:composition template = "/templates/commom-template.xhtml">
	
		<ui:define name="content">
        <div class="containerRegistieren">
        <div class="row">
            <div class="col-md-12">
                <div id="benutzerAendern">
                    <h1>Benutzerdaten Ã¤ndern</h1>
    		<h:form>
    		<h:messages id="messagesInfo" infoStyle="color:green" />
    		<h:messages for="speicherButton" style="color:red" />
   				<h:outputLabel>Bitte geben Sie ihre neue E-Mail Adresse ein:</h:outputLabel>
 				<h:inputText id="email_input" a:placeholder = "#{BenutzerController.benutzer.email}" binding="#{input1}">
							<f:validator validatorId="EmailValidation"></f:validator>
							<f:ajax event="valueChange" execute="email_input"
								render="outputEmailCheck speicherButton"></f:ajax>
						</h:inputText>
						<h:panelGroup id="outputEmailCheck">
							<h:outputText id="outputEmailCheckZwei"
								value="E-Mail schon vorhanden."
								rendered="#{BenutzerController.emailInDBVorhanden}"
								style="color:red; margin:5px; display:block" />
						</h:panelGroup>
						<h:message for="email_input" style="color:red" />
 				<h:outputLabel>Bitte geben Sie ihren neuen Benutzernamen ein:</h:outputLabel>
    			<h:inputText id="benutzername_input" binding="#{input2}" a:placeholder="#{BenutzerController.benutzer.benutzername}" >
						<f:ajax event="valueChange" 
								render="outputNutzernameCheck speicherButton"></f:ajax>
				</h:inputText>
				<h:panelGroup id="outputNutzernameCheck">
					<h:outputText id="outputNutzernameCheckZwei"
								value="Benutzername schon vorhanden."
								rendered="#{BenutzerController.nutzernameInDBVorhanden}"
								style="color:red; margin:5px; display:block" />
				</h:panelGroup>
    			<h:message for="benutzername_input"  style="color:red" />
        		<h:outputLabel>Bitte geben Sie ihr altes Passwort ein:</h:outputLabel>
				<h:inputSecret id="altes_password_input" binding="#{input3}"  />
  				<h:outputLabel>Bitte geben Sie ihr neues Passwort ein:</h:outputLabel>
    			
    			<h:inputSecret
							title="mind. 1 Zahl, mind. 1 GroÃŸbuchstaben, mind. 1 Kleinbuchstaben, 
							mind. 1 Sonderzeichen (@#$%), 6 - 20 Zeichen lang"
							id="neues_password_input" binding="#{input4}" >
							<f:validator validatorId="PasswordValidation"></f:validator>
						</h:inputSecret>
						<h:message for="neues_password_input" style="color:red" />

						<h:panelGroup id="speicherButton">
							<h:commandButton value="Speichern"
								action="#{BenutzerController.benutzerVerwalten(input1.value,input2.value, input3.value, input4.value)}"
								update=":benutzer, :message"
								rendered="#{!BenutzerController.nutzernameVorhanden and !BenutzerController.emailVorhanden}">
							</h:commandButton>
						</h:panelGroup>


 
        	
        
    		</h:form>
             	</div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script type="text/javascript">
    //<![CDATA[
        $(window).load(function() { // makes sure the whole site is loaded
            $('#status').fadeOut(); // will first fade out the loading animation
            $('#preloader').delay(350).fadeOut('slow'); // will fade out the white DIV that covers the website.
            $('body').delay(350).css({'overflow':'visible'});
        })
    //]]>
	</script>
</ui:define>	
</ui:composition>
</html>
